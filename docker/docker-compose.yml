version: '2'
services:

    publisher:
        build:
            context: .
        image: flow-publisher
        # env_file: docker-compose.env
        environment:
            SERVICES: publisher
        external_links:
        # depends on the names of your running docker services for nats and kafka
        - nats
        - kafka_kafka_1
        # depends on the names of the networks of your running docker services
        networks:
        - default
        - redis_default
        - nats_default
        - kafka_default

    # for multiple subscriber with different subscriptions add a sequence number per subscriber service
    subscriber-1:
        build:
            context: .
        image: flow-subscriber-1
        # env_file: docker-compose.env
        environment:
            SERVICES: subscriber-1
        external_links:
        # depends on the names of your running docker services for nats and kafka
        - nats
        - kafka_kafka_1
        networks:
        - default
        # depends on the names of the networks of your running docker services
        - redis_default
        - nats_default
        - kafka_default

networks:
    redis_default:
        external: true
    nats_default:
        external: true
    kafka_default:
        external: true
    